{
  "meta": {
    "project": "Health In Cloud",
    "date": "2025-10-20",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "Health In Cloud is a comprehensive web platform built on Next.js 15 designed to provide personalized rehabilitation exercises for neuropsychology, orthophony, ergotherapy, and physiotherapy. It facilitates user progress tracking, subscription management, and healthcare provider collaboration, all within a multi-language and accessible interface.",
  "core_goals": [
    "Deliver tailored rehabilitation exercises for various medical disciplines.",
    "Enable users to track their progress and analyze performance.",
    "Provide a secure and seamless authentication system including password management and social logins.",
    "Support subscription-based access with Stripe integration including trials and billing management.",
    "Motivate users through gamification elements like badges and achievement tracking.",
    "Allow healthcare providers to monitor patient progress, manage messaging, and invite patients.",
    "Offer an administrative panel for user and system management.",
    "Provide internationalization supporting French and English.",
    "Ensure a modern, responsive, and themable user interface with PWA and offline capabilities.",
    "Implement comprehensive analytics and monitoring to enhance user experience and system reliability."
  ],
  "key_features": [
    "Authentication system supporting email/password and Google OAuth with email verification and password reset.",
    "Extensive exercise management covering neuropsychology, orthophony, ergotherapy, and physiotherapy with progress tracking.",
    "Stripe-powered subscription management with trial periods, billing portal access, and payment processing.",
    "User dashboard featuring detailed exercise statistics, progress visualization, and analytics charts.",
    "Gamification system including badges, streak tracking, and achievement sharing to encourage engagement.",
    "Healthcare provider interface for patient management, communication, and progress monitoring.",
    "Admin panel for managing users, viewing system metrics, and performing administrative tasks securely.",
    "Internationalization supporting French and English languages with dynamic language switching.",
    "Theme and UI system providing multiple style variants and dark/light mode support.",
    "PWA functionality supporting offline use, install prompts, and background service workers.",
    "Transactional email system for notifications such as payment issues, trial status, and account communications.",
    "Analytics and error monitoring using PostHog and Sentry to track usage and capture errors.",
    "Robust security middleware and guards to protect user data and ensure subscription compliance."
  ],
  "user_flow_summary": [
    "Users register or log in via email/password or Google OAuth, complete email verification, and can reset passwords.",
    "Users select rehabilitation exercises tailored to their condition from neuropsychology, orthophony, ergotherapy, or physiotherapy categories.",
    "Users perform exercises and log progress, which updates their personal dashboard with statistics and analytics.",
    "Subscribed users manage billing and subscription details through Stripe-powered interfaces including checkout and customer portals.",
    "Users earn badges and achievements by reaching milestones, tracked and displayed in their profile.",
    "Healthcare providers invite patients, monitor patient exercises and progress, and communicate securely through messaging features.",
    "Administrators manage user accounts, monitor system health, and configure application settings from an admin panel.",
    "Users adjust profile settings including preferences, security options, and notification configurations.",
    "Users switch language preferences between French and English dynamically providing localized content.",
    "The application supports offline use and installation as a PWA, ensuring uninterrupted access.",
    "Transactional emails are sent for key events such as subscription renewals, payment failures, and trial period notifications."
  ],
  "validation_criteria": [
    "Authentication flows function correctly including email verification, password reset, and Google OAuth.",
    "Exercise data is accurate and progress tracking updates user dashboards consistently.",
    "Subscription system processes payments correctly, honors trials, and allows billing portal access.",
    "User dashboard analytics display accurate and responsive exercise statistics and charts.",
    "Gamification elements properly reward user achievements and badges are correctly assigned and displayed.",
    "Healthcare provider features enable patient invitations, messaging, and progress monitoring without errors.",
    "Admin panel allows secure user management and system monitoring with appropriate access controls.",
    "Internationalization supports fluid language switching with full translation coverage in French and English.",
    "Theming and UI adapt correctly to user preferences including dark/light modes and custom style variants.",
    "PWA features work offline with service worker registration and prompt for installation.",
    "Transactional emails are triggered and formatted correctly for payment and subscription status changes.",
    "Analytics and error monitoring systems capture relevant user events and exceptions reliably.",
    "Security middleware and subscription guards prevent unauthorized access and data leakage."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "Next.js 15",
      "React 19",
      "Tailwind CSS 4",
      "shadcn/ui",
      "Prisma",
      "PostgreSQL",
      "Better Auth",
      "Stripe",
      "next-intl",
      "Zustand",
      "Recharts",
      "Sentry",
      "PostHog",
      "Vitest",
      "Playwright",
      "Serwist",
      "React Email",
      "Resend"
    ],
    "features": [
      {
        "name": "Authentication System",
        "description": "Complete authentication system with email/password and Google OAuth, session management, password reset, and email verification",
        "files": [
          "app/[locale]/(auth)/login/page.tsx",
          "app/[locale]/(auth)/register/page.tsx",
          "app/[locale]/(auth)/verify-email/page.tsx",
          "app/[locale]/(auth)/reset-password/page.tsx",
          "app/actions/signup-with-consent.ts",
          "app/actions/change-password.ts",
          "app/actions/delete-account.ts",
          "app/actions/revoke-session.ts",
          "components/auth/login-form.tsx",
          "components/auth/signup-form.tsx",
          "components/auth/google-button.tsx",
          "components/auth/user-nav.tsx",
          "lib/auth.ts",
          "lib/auth-client.ts",
          "lib/auth-utils.ts"
        ]
      },
      {
        "name": "Exercise Management System",
        "description": "Rehabilitation exercises for neuropsychology, orthophony, ergotherapy, and physiotherapy with progress tracking",
        "files": [
          "app/[locale]/(app)/neuro/page.tsx",
          "app/[locale]/(app)/neuro/client-page.tsx",
          "app/[locale]/(app)/ortho/page.tsx",
          "app/[locale]/(app)/ortho/client-page.tsx",
          "app/[locale]/(app)/ergo/page.tsx",
          "app/[locale]/(app)/ergo/client-page.tsx",
          "app/[locale]/(app)/kine/page.tsx",
          "app/api/exercises/neuro/route.ts",
          "app/api/exercises/ortho/route.ts",
          "app/api/exercises/ergo/route.ts",
          "app/api/exercises/kine/route.ts",
          "lib/exercises.ts",
          "lib/data/exercises/neuro.json",
          "lib/data/exercises/ortho.json",
          "lib/data/exercises/ergo.json",
          "lib/data/exercises/kine.json"
        ]
      },
      {
        "name": "Subscription Management",
        "description": "Stripe-powered subscription system with trial periods, billing portal, and payment processing",
        "files": [
          "app/[locale]/(app)/subscription/page.tsx",
          "app/[locale]/(app)/subscription/success/page.tsx",
          "app/actions/create-checkout-session.ts",
          "app/actions/create-customer-portal-session.ts",
          "app/actions/get-subscription-status.ts",
          "app/api/webhooks/stripe/route.ts",
          "components/subscription/pricing-table.tsx",
          "components/subscription/pricing-button.tsx",
          "components/subscription/subscription-card.tsx",
          "components/subscription/protected-client-page.tsx",
          "lib/stripe.ts",
          "lib/stripe-client.ts",
          "lib/subscription.ts",
          "lib/subscription-check.ts",
          "lib/subscription-guard.ts"
        ]
      },
      {
        "name": "User Dashboard & Analytics",
        "description": "Comprehensive dashboard with exercise statistics, progress tracking, and performance analytics",
        "files": [
          "app/[locale]/(app)/dashboard/page.tsx",
          "app/[locale]/(app)/dashboard/analyse/page.tsx",
          "app/actions/get-dashboard-stats.ts",
          "app/actions/get-analysis-data.ts",
          "components/dashboard/stats-cards.tsx",
          "components/dashboard/recent-exercises-list.tsx",
          "components/analyse/analysis-kpis.tsx",
          "components/analyse/difficulty-distribution-chart.tsx",
          "components/analyse/exercise-performance-chart.tsx",
          "components/analyse/exercise-type-distribution-chart.tsx",
          "components/analyse/score-evolution-chart.tsx",
          "components/analyse/time-range-filter.tsx",
          "components/analyse/type-difficulty-breakdown.tsx"
        ]
      },
      {
        "name": "Badge & Achievement System",
        "description": "Gamification system with badges, streaks, and achievement tracking to motivate users",
        "files": [
          "app/[locale]/(app)/badges/page.tsx",
          "app/[locale]/(app)/badges/[badgeId]/page.tsx",
          "app/actions/get-badges.ts",
          "components/badges/badge-card.tsx",
          "components/badges/badge-notification.tsx",
          "components/badges/badge-progress.tsx",
          "components/badges/badge-share-button.tsx",
          "components/badges/badge-summary.tsx",
          "lib/badges.ts"
        ]
      },
      {
        "name": "Healthcare Provider Interface",
        "description": "Healthcare provider dashboard for patient management, messaging, and progress monitoring",
        "files": [
          "app/[locale]/(app)/healthcare/page.tsx",
          "app/[locale]/(app)/healthcare/invite/page.tsx",
          "app/[locale]/(app)/healthcare/patients/[patientId]/page.tsx",
          "app/actions/healthcare/invite-patient.ts",
          "app/actions/healthcare/get-patients.ts",
          "app/actions/healthcare/send-message.ts",
          "components/healthcare/invite-patient-form.tsx",
          "components/healthcare/patients-table.tsx",
          "components/healthcare/patient-stats-card.tsx",
          "components/healthcare/patient-messages.tsx",
          "components/healthcare/association-status-badge.tsx",
          "components/patient/patient-messaging-card.tsx"
        ]
      },
      {
        "name": "Admin Panel",
        "description": "Administrative interface for user management, system monitoring, and configuration",
        "files": [
          "app/[locale]/(app)/admin/users/page.tsx",
          "app/[locale]/(app)/admin/emails/page.tsx",
          "app/actions/admin/get-users.ts",
          "app/actions/admin/delete-user.ts",
          "app/actions/admin/check-is-admin.ts",
          "components/admin/users-table.tsx",
          "components/admin/admin-link.tsx"
        ]
      },
      {
        "name": "User Profile Management",
        "description": "Comprehensive user profile system with preferences, security settings, and account management",
        "files": [
          "app/[locale]/(app)/profile/page.tsx",
          "app/actions/update-profile.ts",
          "app/actions/update-preferences.ts",
          "components/profile/edit-name-form.tsx",
          "components/profile/change-password-dialog.tsx",
          "components/profile/delete-account-dialog.tsx",
          "components/profile/active-sessions.tsx",
          "components/profile/security-info.tsx",
          "components/profile/locale-preference.tsx",
          "components/profile/theme-preference.tsx",
          "components/profile/theme-style-selector.tsx",
          "components/profile/notification-preference.tsx",
          "components/profile/my-provider-section.tsx"
        ]
      },
      {
        "name": "Internationalization",
        "description": "Multi-language support with French and English localization",
        "files": [
          "i18n/routing.ts",
          "i18n/request.ts",
          "locales/fr/common.json",
          "locales/en/common.json",
          "components/navigation/language-switcher.tsx",
          "lib/locale-utils.ts"
        ]
      },
      {
        "name": "Theme & UI System",
        "description": "Comprehensive theming system with multiple style variants and dark/light mode support",
        "files": [
          "app/globals.css",
          "app/theme-style-script.tsx",
          "components/providers/theme-provider.tsx",
          "components/profile/theme-preference.tsx",
          "components/profile/theme-style-selector.tsx",
          "lib/theme-config.ts",
          "types/theme.ts"
        ]
      },
      {
        "name": "PWA & Offline Support",
        "description": "Progressive Web App functionality with service worker, offline support, and install prompts",
        "files": [
          "app/sw.ts",
          "app/[locale]/offline/page.tsx",
          "public/manifest.json",
          "components/pwa/service-worker-registration.tsx",
          "components/pwa/pwa-install-prompt.tsx",
          "components/pwa/storage-migration.tsx",
          "next.config.ts"
        ]
      },
      {
        "name": "Email System",
        "description": "Transactional email system with React Email templates for notifications and communications",
        "files": [
          "emails/payment-failed.tsx",
          "emails/renewal-reminder.tsx",
          "emails/trial-ended.tsx",
          "emails/trial-ending.tsx",
          "emails/components/email-layout.tsx",
          "emails/components/email-button.tsx",
          "lib/email.ts",
          "lib/email/send.ts",
          "app/api/cron/subscription-notifications/route.ts"
        ]
      },
      {
        "name": "Analytics & Monitoring",
        "description": "Comprehensive analytics with PostHog and error monitoring with Sentry",
        "files": [
          "lib/posthog.ts",
          "lib/posthog-client.ts",
          "components/providers/posthog-provider.tsx",
          "lib/analytics/events.ts",
          "lib/analytics/properties.ts",
          "lib/analytics/tracking.ts",
          "sentry.client.config.ts",
          "sentry.server.config.ts",
          "instrumentation.ts"
        ]
      },
      {
        "name": "UI Component Library",
        "description": "Comprehensive UI component library built with shadcn/ui and Radix UI primitives",
        "files": [
          "components/ui/button.tsx",
          "components/ui/card.tsx",
          "components/ui/input.tsx",
          "components/ui/form.tsx",
          "components/ui/dialog.tsx",
          "components/ui/dropdown-menu.tsx",
          "components/ui/navigation-menu.tsx",
          "components/ui/table.tsx",
          "components/ui/tabs.tsx",
          "components/ui/alert.tsx",
          "components/ui/badge.tsx",
          "components/ui/progress.tsx",
          "components/ui/skeleton.tsx",
          "components/ui/select.tsx",
          "components/ui/separator.tsx",
          "components/ui/sheet.tsx",
          "components/ui/scroll-area.tsx",
          "components/ui/avatar.tsx",
          "components/ui/checkbox.tsx",
          "components/ui/label.tsx",
          "components/ui/textarea.tsx",
          "components/ui/empty-state.tsx",
          "components/ui/sonner.tsx"
        ]
      },
      {
        "name": "Navigation & Layout",
        "description": "Responsive navigation system with mobile support and footer components",
        "files": [
          "components/navigation/header.tsx",
          "components/navigation/header-client.tsx",
          "components/navigation/mobile-nav.tsx",
          "components/navigation/footer.tsx",
          "components/navigation/language-switcher.tsx"
        ]
      },
      {
        "name": "Database Schema & Models",
        "description": "Comprehensive database schema with Prisma for user management, exercises, subscriptions, and analytics",
        "files": [
          "prisma/schema.prisma",
          "prisma/seed.ts",
          "lib/prisma.ts"
        ]
      },
      {
        "name": "Security & Middleware",
        "description": "Security middleware, authentication guards, and subscription protection",
        "files": [
          "middleware.ts",
          "lib/security/protection.ts",
          "lib/subscription-guard.ts",
          "lib/subscription-check.ts"
        ]
      },
      {
        "name": "Debug & Development Tools",
        "description": "Development and debugging tools for authentication and locale management",
        "files": [
          "components/debug/auth-debugger.tsx",
          "components/debug/locale-debugger.tsx"
        ]
      }
    ]
  }
}
